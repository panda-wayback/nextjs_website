# é¡¹ç›®è„šæœ¬è¯´æ˜

æœ¬ç›®å½•åŒ…å«ç”¨äºç®¡ç† Next.js åº”ç”¨çš„ä¾¿æ·è„šæœ¬ã€‚

## ğŸ“‹ è„šæœ¬åˆ—è¡¨

### ğŸš€ start.sh
å¯åŠ¨ Next.js åº”ç”¨

**åŠŸèƒ½**:
- è‡ªåŠ¨é…ç½® Node.js ç¯å¢ƒï¼ˆé€šè¿‡ nvmï¼‰
- æ£€æŸ¥å¹¶å®‰è£…ä¾èµ–
- æ£€æŸ¥å¹¶æ„å»ºé¡¹ç›®
- ä½¿ç”¨ PM2 å¯åŠ¨åº”ç”¨
- ä¿å­˜ PM2 é…ç½®

**ä½¿ç”¨æ–¹æ³•**:
```bash
./scripts/start.sh
```

### â¸ï¸ stop.sh
åœæ­¢ Next.js åº”ç”¨

**åŠŸèƒ½**:
- åœæ­¢ PM2 ç®¡ç†çš„åº”ç”¨
- ä¿å­˜ PM2 é…ç½®

**ä½¿ç”¨æ–¹æ³•**:
```bash
./scripts/stop.sh
```

### ğŸ”§ setup-nvm.sh
å®‰è£…å’Œé…ç½® Node.js ç¯å¢ƒ

**åŠŸèƒ½**:
- æ£€æŸ¥å¹¶å®‰è£… nvmï¼ˆå¦‚æœæœªå®‰è£…ï¼‰
- å®‰è£… Node.js 20ï¼ˆå¦‚æœæœªå®‰è£…ï¼‰
- æ£€æŸ¥å¹¶å®‰è£… PM2ï¼ˆå¦‚æœæœªå®‰è£…ï¼‰

**ä½¿ç”¨æ–¹æ³•**:
```bash
./scripts/setup-nvm.sh
```

### âš™ï¸ setup-startup.sh
é…ç½® PM2 å¼€æœºè‡ªå¯

**åŠŸèƒ½**:
- é…ç½® PM2 åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨å¯åŠ¨åº”ç”¨
- æ”¯æŒ macOS å’Œ Linux ç³»ç»Ÿ

**ä½¿ç”¨æ–¹æ³•**:
```bash
./scripts/setup-startup.sh
```

## ğŸ¯ å¿«é€Ÿå¼€å§‹

### 1. é¦–æ¬¡å¯åŠ¨

```bash
# å¯åŠ¨åº”ç”¨ï¼ˆä¼šè‡ªåŠ¨å®‰è£…ä¾èµ–å’Œæ„å»ºï¼‰
./scripts/start.sh
```

### 2. æŸ¥çœ‹åº”ç”¨çŠ¶æ€

```bash
# æŸ¥çœ‹ PM2 çŠ¶æ€
pm2 status

# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
pm2 logs my-app-nextjs

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
pm2 logs my-app-nextjs --lines 100
```

### 3. åœæ­¢åº”ç”¨

```bash
./scripts/stop.sh
```

### 4. é…ç½®å¼€æœºè‡ªå¯

```bash
# é…ç½®å¼€æœºè‡ªå¯ï¼ˆéœ€è¦ sudo æƒé™ï¼‰
./scripts/setup-startup.sh
```

## ğŸ’¡ å¸¸ç”¨å‘½ä»¤

```bash
# é‡å¯åº”ç”¨
pm2 restart my-app-nextjs

# é‡æ–°åŠ è½½åº”ç”¨ï¼ˆé›¶åœæœºæ—¶é—´ï¼‰
pm2 reload my-app-nextjs

# æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
pm2 describe my-app-nextjs

# ç›‘æ§åº”ç”¨
pm2 monit

# æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—
pm2 logs

# æ¸…ç©ºæ—¥å¿—
pm2 flush
```

## ğŸ“Š åº”ç”¨ä¿¡æ¯

- **åº”ç”¨åç§°**: `my-app-nextjs`
- **é»˜è®¤ç«¯å£**: `3000`
- **è®¿é—®åœ°å€**: `http://localhost:3000`

## ğŸ” æ•…éšœæ’æŸ¥

### åº”ç”¨æ— æ³•å¯åŠ¨

1. æ£€æŸ¥ Node.js ç‰ˆæœ¬ï¼š
```bash
node -v  # åº”è¯¥æ˜¯ v20.x.x
```

2. æ£€æŸ¥ä¾èµ–æ˜¯å¦å®‰è£…ï¼š
```bash
ls node_modules
```

3. æ£€æŸ¥æ„å»ºæ˜¯å¦æˆåŠŸï¼š
```bash
ls .next
```

4. æŸ¥çœ‹ PM2 æ—¥å¿—ï¼š
```bash
pm2 logs my-app-nextjs --err
```

### PM2 å‘½ä»¤ä¸å­˜åœ¨

å®‰è£… PM2ï¼š
```bash
npm install -g pm2
```

æˆ–è€…è¿è¡Œï¼š
```bash
./scripts/setup-nvm.sh
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ç«¯å£å ç”¨**: ç¡®ä¿ç«¯å£ 3000 æœªè¢«å ç”¨
2. **ç¯å¢ƒå˜é‡**: å¦‚æœ‰ `.env` æ–‡ä»¶ï¼Œç¡®ä¿å·²æ­£ç¡®é…ç½®
3. **æ„å»ºæ–‡ä»¶**: `.next` ç›®å½•åŒ…å«æ„å»ºäº§ç‰©ï¼Œå»ºè®®æ·»åŠ åˆ° `.gitignore`
4. **PM2 é…ç½®**: PM2 é…ç½®ä¼šè‡ªåŠ¨ä¿å­˜ï¼Œé‡å¯ç³»ç»Ÿåä¼šè‡ªåŠ¨æ¢å¤

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [Next.js æ–‡æ¡£](https://nextjs.org/docs)
- [PM2 æ–‡æ¡£](https://pm2.keymetrics.io/docs/usage/quick-start/)
- [nvm æ–‡æ¡£](https://github.com/nvm-sh/nvm)
